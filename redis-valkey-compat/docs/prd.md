# 제품 요구사항 문서 (PRD): Redis/Valkey 호환성 테스트 스위트

## 1. 개요

본 문서는 Redis 7.2.6과 Valkey 9.0 간의 호환성을 검증하기 위해 설계된 테스트 스위트의 요구사항을 기술합니다. 개발자에게 Valkey가 기존 Redis 기반 애플리케이션을 대체할 수 있는 드롭-인(drop-in) 솔루션인지 평가할 수 있는 간단하고 자동화된 도구를 제공하는 것을 목표로 합니다.

## 2. 프로젝트 목표

- **주요 목표:** 주요 Redis 및 Valkey 명령어들의 동작을 자동으로 비교하여 차이점을 식별합니다.
- **부차적 목표:** 발견된 비호환성 문제에 대해 명확하고 실행 가능한 보고서를 제공합니다.
- **비-목표:** 성능 벤치마킹은 이 스위트의 주요 목적이 아니지만, 추후 확장 기능으로 추가될 수 있습니다.

## 3. 사용자 시나리오

- **개발자로서,** 나는 단일 명령어를 실행하여 내 애플리케이션의 Redis 명령어 사용이 Valkey 인스턴스에서도 문제없이 동작하는지 테스트하고, 원활한 마이그레이션을 보장하고 싶다.
- **DevOps 엔지니어로서,** 나는 이 테스트 스위트를 CI/CD 파이프라인에 통합하여 새로운 Valkey 버전이 출시될 때마다 지속적으로 호환성을 모니터링하고 싶다.

## 4. 기능 요구사항

애플리케이션은 다음 구성 요소로 이루어집니다:

- **`docker-compose.yml`**: 통제된 환경에서 Redis와 Valkey 인스턴스를 쉽게 실행하기 위한 파일.
- **테스트 실행기 (`test_runner.py`)**: 전체 테스트 프로세스를 조율하는 Python 스크립트.
  - 설정 파일에 정의된 두 데이터베이스에 모두 연결해야 합니다.
  - 모든 테스트 시나리오를 동적으로 발견하고 실행해야 합니다.
  - 결과를 수집하고 비교해야 합니다.
  - 사람이 읽기 좋은 테이블과 기계가 읽기 좋은 JSON 형식으로 결과를 제공해야 합니다.
- **테스트 시나리오 (`scenarios/*.py`)**: 특정 기능 그룹을 테스트하는 개별 Python 모듈.
  - **`basic_crud.py`**: `SET`, `GET`, `DEL`, `EXISTS`, `EXPIRE` 테스트.
  - **`data_structures.py`**: 해시, 리스트, 셋, 정렬된 셋 테스트.
  - **`scan_and_iter.py`**: `SCAN`, `HSCAN`, `ZSCAN` 테스트.
  - **`pubsub.py`**: `PUBLISH` 및 `SUBSCRIBE` 테스트.
  - **`lua_and_tx.py`**: `EVAL` 및 `MULTI`/`EXEC` 트랜잭션 테스트.
- **설정 (`config.py`)**: 대상 데이터베이스의 연결 매개변수를 정의하는 파일.
- **README.md**: 테스트 스위트 설정 및 실행 방법에 대한 명확한 문서.
