2025-12-10 18:18:22,767 | [92mINFO[0m: [92mTask:
TaskConfig(db=<DB.Valkey: 'Valkey'>, db_config=ValkeyDBConfig(db_label='valkey-cluster', version='', note='', host='127.0.0.1', port=6379, password=None, deployment_type=<DeploymentType.CLUSTER: 'CLUSTER'>, nodes=['127.0.0.1:7000'], service_name=None), db_case_config=ValkeyDBCaseConfig(index_name='vdbbench_idx', prefix='doc:', M=16, EF_CONSTRUCTION=200, EF_RUNTIME=10, distance_metric=<MetricType.COSINE: 'COSINE'>, metric_type=None), case_config=CaseConfig(case_id=<CaseType.Performance1536D50K: 50>, custom_case={}, k=100, concurrency_search_config=ConcurrencySearchConfig(num_concurrency=[1, 5, 10, 20, 30, 40, 60, 80], concurrency_duration=30, concurrency_timeout=3600)), stages=['drop_old', 'load', 'search_serial', 'search_concurrent'])
[0m (cli.py:649) (737160)
2025-12-10 18:18:22,768 | [92mINFO[0m: [92mgenerated uuid for the tasks: af1da28d17de43f995ca437372a8816b[0m (interface.py:76) (737160)
2025-12-10 18:18:22,768 | INFO | DB             | CaseType     Dataset               Filter | task_label (task_runner.py:400)
2025-12-10 18:18:22,768 | INFO | -----------    | ------------ -------------------- ------- | -------    (task_runner.py:400)
2025-12-10 18:18:22,768 | INFO | Valkey-valkey-cluster | Performance  OpenAI-SMALL-50K         0.0 | af1da28d17de43f995ca437372a8816b (task_runner.py:400)
2025-12-10 18:18:22,768 | [92mINFO[0m: [92mtask submitted: id=af1da28d17de43f995ca437372a8816b, af1da28d17de43f995ca437372a8816b, case number: 1[0m (interface.py:251) (737160)
2025-12-10 18:18:23,430 | [92mINFO[0m: [92m[1/1] start case: {'label': <CaseLabel.Performance: 2>, 'name': 'Search Performance Test (50K Dataset, 1536 Dim)', 'dataset': {'data': {'name': 'OpenAI', 'size': 50000, 'dim': 1536, 'metric_type': <MetricType.COSINE: 'COSINE'>}}, 'db': 'Valkey-valkey-cluster'}, drop_old=True[0m (interface.py:181) (737186)
2025-12-10 18:18:23,430 | [92mINFO[0m: [92mStarting run[0m (task_runner.py:138) (737186)
2025-12-10 18:18:23,430 | [92mINFO[0m: [92mValkeyClient initializing with config: {'host': '127.0.0.1', 'port': 6379, 'password': None, 'deployment_type': 'CLUSTER', 'nodes': ['127.0.0.1:7000'], 'service_name': None}[0m (new_client.py:36) (737186)
2025-12-10 18:18:23,430 | [92mINFO[0m: [92mGetting client...[0m (new_client.py:46) (737186)
2025-12-10 18:31:40,836 | [93mWARNING[0m: [93m[1/1] case {'label': <CaseLabel.Performance: 2>, 'name': 'Search Performance Test (50K Dataset, 1536 Dim)', 'dataset': {'data': {'name': 'OpenAI', 'size': 50000, 'dim': 1536, 'metric_type': <MetricType.COSINE: 'COSINE'>}}, 'db': 'Valkey-valkey-cluster'} failed to run, reason=Valkey Cluster cannot be connected. Please provide at least one reachable node: Timeout connecting to server[0m (interface.py:203) (737186)
Traceback (most recent call last):
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/connection.py", line 319, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/retry.py", line 67, in call_with_retry
    raise error
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/retry.py", line 62, in call_with_retry
    return do()
           ^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/connection.py", line 320, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/connection.py", line 747, in _connect
    raise err
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/connection.py", line 735, in _connect
    sock.connect(socket_address)
TimeoutError: [Errno 110] Connection timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/cluster.py", line 1149, in _execute_command
    connection = get_connection(valkey_node, *args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/cluster.py", line 51, in get_connection
    return valkey_node.connection or valkey_node.connection_pool.get_connection(
                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/connection.py", line 1125, in get_connection
    connection.connect()
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/connection.py", line 323, in connect
    raise TimeoutError("Timeout connecting to server")
valkey.exceptions.TimeoutError: Timeout connecting to server

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/connection.py", line 319, in connect
    sock = self.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/retry.py", line 67, in call_with_retry
    raise error
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/retry.py", line 62, in call_with_retry
    return do()
           ^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/connection.py", line 320, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ^^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/connection.py", line 747, in _connect
    raise err
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/connection.py", line 735, in _connect
    sock.connect(socket_address)
TimeoutError: [Errno 110] Connection timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/cluster.py", line 1553, in initialize
    cluster_slots = str_if_bytes(r.execute_command("CLUSTER SLOTS"))
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/client.py", line 564, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/connection.py", line 1125, in get_connection
    connection.connect()
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/connection.py", line 323, in connect
    raise TimeoutError("Timeout connecting to server")
valkey.exceptions.TimeoutError: Timeout connecting to server

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/vectordb_bench/interface.py", line 182, in _async_task_v2
    case_res.metrics = runner.run(drop_old)
                       ^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/vectordb_bench/backend/task_runner.py", line 140, in run
    self._pre_run(drop_old)
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/vectordb_bench/backend/task_runner.py", line 131, in _pre_run
    self.init_db(drop_old)
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/vectordb_bench/backend/task_runner.py", line 120, in init_db
    self.db = db_cls(
              ^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/vectordb_bench/backend/clients/valkey/new_client.py", line 47, in __init__
    self.client = self._get_client()
                  ^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/vectordb_bench/backend/clients/valkey/new_client.py", line 84, in _get_client
    return ValkeyCluster(
           ^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/cluster.py", line 649, in __init__
    self.commands_parser = CommandsParser(self)
                           ^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/_parsers/commands.py", line 67, in __init__
    self.initialize(valkey_connection)
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/_parsers/commands.py", line 70, in initialize
    commands = r.command()
               ^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/commands/core.py", line 787, in command
    return self.execute_command("COMMAND", **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/cluster.py", line 1119, in execute_command
    raise e
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/cluster.py", line 1105, in execute_command
    res[node.name] = self._execute_command(node, *args, **kwargs)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/cluster.py", line 1183, in _execute_command
    self.nodes_manager.initialize()
  File "/home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/.venv/lib/python3.12/site-packages/valkey/cluster.py", line 1629, in initialize
    raise ValkeyClusterException(
valkey.exceptions.ValkeyClusterException: Valkey Cluster cannot be connected. Please provide at least one reachable node: Timeout connecting to server
2025-12-10 18:31:40,844 | INFO |Task summary: run_id=af1da, task_label=af1da28d17de43f995ca437372a8816b (models.py:446)
2025-12-10 18:31:40,845 | INFO |DB     | db_label          case                                            label                            | load_dur    qps        latency(p99)    latency(p95)    recall        max_load_count | label (models.py:446)
2025-12-10 18:31:40,845 | INFO |------ | ----------------- ----------------------------------------------- -------------------------------- | ----------- ---------- --------------- --------------- ------------- -------------- | ----- (models.py:446)
2025-12-10 18:31:40,845 | INFO |Valkey | valkey-cluster    Search Performance Test (50K Dataset, 1536 Dim) af1da28d17de43f995ca437372a8816b | 0.0         0.0        0.0             0.0             0.0           0              | x     (models.py:446)
2025-12-10 18:31:40,845 | [92mINFO[0m: [92mwrite results to disk /home/ubuntu/dev-proj/agile_vibe_test/valkey-vector-benchmark/VectorDBBench/vectordb_bench/results/Valkey/result_20251210_af1da28d17de43f995ca437372a8816b_valkey.json[0m (models.py:283) (737186)
2025-12-10 18:31:40,846 | [92mINFO[0m: [92mSuccess to finish task: label=af1da28d17de43f995ca437372a8816b, run_id=af1da28d17de43f995ca437372a8816b[0m (interface.py:222) (737186)
